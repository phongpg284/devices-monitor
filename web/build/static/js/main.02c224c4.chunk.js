(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{303:function(e,t,n){},304:function(e,t,n){},305:function(e,t,n){},312:function(e,t,n){},368:function(e,t,n){},434:function(e,t,n){},435:function(e,t,n){},437:function(e,t,n){},438:function(e,t,n){},443:function(e,t,n){},588:function(e,t,n){"use strict";n.r(t);var a,i,c,r,l,s,o,d,u=n(0),j=n.n(u),h=n(17),b=n.n(h),m=(n(303),n(27)),O=n(31),p=n(619),v=n(86),x=n(33),f=(n(304),n(62)),g=n(613),y=Object(g.a)(a||(a=Object(f.a)(["\n    fragment EnvironmentUnit on EnvironmentUnit {\n        data\n        threshold\n        updateTime\n    }\n"]))),T=Object(g.a)(i||(i=Object(f.a)(["\n    ","\n    query GetBorderDevices {\n        getBorderDevices {\n            _id\n            name \n            lat\n            long\n            humidity {\n                ...EnvironmentUnit\n            }\n            temperature {\n                ...EnvironmentUnit\n            }\n            rain {\n                data\n                updateTime\n            } \n            dust {\n                ...EnvironmentUnit\n            }\n            coGas {\n                ...EnvironmentUnit\n            }\n            soilHumid {\n                ...EnvironmentUnit\n            }\n            cylinder \n            alert\n            locationUpdateTime\n        }\n    }\n"])),y),S=(Object(g.a)(c||(c=Object(f.a)(["\n    mutation CreateBorderDevice($input: BorderDeviceCreateInput) {\n        ","\n        createBorderDevice(input: $input) {\n            _id\n            name \n            lat\n            long\n            humidity {\n                ...EnvironmentUnit\n            }\n            temperature {\n                ...EnvironmentUnit\n            }\n            rain {\n                data\n                updateTime\n            } \n            dust {\n                ...EnvironmentUnit\n            }\n            coGas {\n                ...EnvironmentUnit\n            }\n            soilHumid {\n                ...EnvironmentUnit\n            }\n            cylinder\n            alert\n            locationUpdateTime\n        }\n    }\n"])),y),Object(g.a)(r||(r=Object(f.a)(["\n    mutation UpdateBorderDevice($input: BorderDeviceUpdateInput) {\n        ","\n        updateBorderDevice(input: $input) {\n            _id\n            name \n            lat\n            long\n            humidity {\n                ...EnvironmentUnit\n            }\n            temperature {\n                ...EnvironmentUnit\n            }\n            rain {\n                data\n                updateTime\n            } \n            dust {\n                ...EnvironmentUnit\n            }\n            coGas {\n                ...EnvironmentUnit\n            }\n            soilHumid {\n                ...EnvironmentUnit\n            }\n            cylinder\n            alert\n            locationUpdateTime\n        }\n    }\n"])),y),n(305),n(617)),C=n(604),N=n(615),E=n(614),U=n(276),D=n(605),_=n(4),w=function(){return Object(_.jsx)("header",{className:"border-bottom",children:Object(_.jsxs)(S.a,{bg:"light",expand:"lg",className:"p-0 px-2",children:[Object(_.jsx)(S.a.Brand,{href:"/",className:"p-0",children:Object(_.jsx)(C.a,{className:"header__logo"})}),Object(_.jsx)(S.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(_.jsxs)(S.a.Collapse,{id:"basic-navbar-nav",children:[Object(_.jsxs)(N.a,{className:"ml-auto d-flex align-items-center",children:[Object(_.jsx)(v.b,{to:"/",className:"px-3",style:{fontSize:"1.2rem"},children:"Home"}),Object(_.jsx)(v.b,{to:"/devices",className:"px-3",style:{fontSize:"1.2rem"},children:"Thi\u1ebft b\u1ecb"}),Object(_.jsx)(v.b,{to:"/statistics",className:"px-3",style:{fontSize:"1.2rem"},children:"D\u1eef li\u1ec7u"}),Object(_.jsx)(v.b,{to:"/",className:"px-3 mr-3",style:{fontSize:"1.2rem"},children:"About"})]}),Object(_.jsxs)(E.a,{inline:!0,className:"mr-5",children:[Object(_.jsx)(U.a,{type:"search",placeholder:"Search",className:"mr-2","aria-label":"Search"}),Object(_.jsx)(D.a,{variant:"outline-success",children:"Search"})]})]})]})})},k=(n(312),n(313),n(314),n(315),n(58)),F=n.n(k),I=n(277),B=n.n(I),L=n(278),P=n.n(L),H=function(){var e=Object(u.useContext)(_e).deviceState,t=Object(u.useState)([]),n=Object(O.a)(t,2),a=n[0],i=n[1];Object(u.useEffect)((function(){var t,n=null===(t=e.data)||void 0===t?void 0:t.map((function(e,t){return Object(m.a)(Object(m.a)({},e),{},{cordinate:"".concat(e.lat[0],",").concat(e.long[0]),id:t,humidity:e.humidity.data[0],temperature:e.temperature.data[0],coGas:e.coGas.data[0],dust:e.dust.data[0],soilHumid:e.soilHumid.data[0],rain:e.rain?"C\xf3":"Kh\xf4ng"})}));n&&i(n)}),[e]);var c=[{dataField:"id",text:"ID",sort:!0,filter:Object(k.textFilter)(),headerStyle:{width:"80px"}},{dataField:"name",text:"T\xean thi\u1ebft b\u1ecb",sort:!0,filter:Object(k.textFilter)()},{dataField:"cordinate",text:"To\u1ea1 \u0111\u1ed9",sort:!0,filter:Object(k.textFilter)(),headerStyle:{width:"180px"}},{dataField:"temperature",text:"Nhi\u1ec7t \u0111\u1ed9 (\xb0C)",sort:!0,filter:Object(k.textFilter)()},{dataField:"humidity",text:"\u0110\u1ed9 \u1ea9m (%)",sort:!0,filter:Object(k.textFilter)()},{dataField:"rain",text:"M\u01b0a",sort:!0,filter:Object(k.textFilter)()},{dataField:"dust",text:"\u0110\u1ed9 b\u1ee5i (mg/m3)",sort:!0,filter:Object(k.textFilter)()},{dataField:"coGas",text:"N\u1ed3ng \u0111\u1ed9 CO (ppm)",sort:!0,filter:Object(k.textFilter)()},{dataField:"soilHumid",text:"\u0110\u1ed9 \u1ea9m \u0111\u1ea5t (%)",sort:!0,filter:Object(k.textFilter)()}];return Object(_.jsx)("div",{className:"p-2",children:Object(_.jsx)(B.a,{keyField:"id",data:a,columns:c,rowStyle:{},noDataIndication:"Table is empty",striped:!0,hover:!0,condensed:!0,filter:F()(),pagination:P()({})})})},$=(n(118),n(60)),G=n.n($),A=(n(214),n(140)),R=n.n(A),z=n(618),K=n(620),M=n(624),W=n(625),q=(n(368),n(622)),V=Object(g.a)(l||(l=Object(f.a)(["\n    fragment EnvironmentUnit on EnvironmentUnit {\n        data\n        threshold\n        updateTime\n    }\n"]))),Z=Object(g.a)(s||(s=Object(f.a)(["\n    ","\n    mutation SendAlert($id: String!) {\n        sendAlert(id: $id) {\n            _id\n            name \n            lat\n            long\n            humidity {\n                ...EnvironmentUnit\n            }\n            temperature {\n                ...EnvironmentUnit\n            }\n            rain {\n                data\n                updateTime\n            } \n            dust {\n                ...EnvironmentUnit\n            }\n            coGas {\n                ...EnvironmentUnit\n            }\n            soilHumid {\n                ...EnvironmentUnit\n            }\n            cylinder\n            alert\n            locationUpdateTime\n        }\n    }\n"])),V),J=Object(g.a)(o||(o=Object(f.a)(["\n    ","\n    mutation UpdateBorderCylinderStatus($id: String!, $status: String!) {\n        updateBorderCylinderStatus(id: $id, status: $status) {\n            _id\n            name \n            lat\n            long\n            humidity {\n                ...EnvironmentUnit\n            }\n            temperature {\n                ...EnvironmentUnit\n            }\n            rain {\n                data\n                updateTime\n            } \n            dust {\n                ...EnvironmentUnit\n            }\n            coGas {\n                ...EnvironmentUnit\n            }\n            soilHumid {\n                ...EnvironmentUnit\n            }\n            cylinder\n            alert\n            locationUpdateTime\n        }\n    }\n"])),V),X=Object(g.a)(d||(d=Object(f.a)(["\n    ","\n    mutation SetBorderThreshold($id: String!, $property: String! $value: Float!) {\n        setBorderThreshold(id: $id, property: $property, value: $value) {\n            _id\n            name \n            lat\n            long\n            humidity {\n                ...EnvironmentUnit\n            }\n            temperature {\n                ...EnvironmentUnit\n            }\n            rain {\n                data\n                updateTime\n            } \n            dust {\n                ...EnvironmentUnit\n            }\n            coGas {\n                ...EnvironmentUnit\n            }\n            soilHumid {\n                ...EnvironmentUnit\n            }\n            cylinder\n            alert\n            locationUpdateTime\n        }\n    }\n"])),V),Q=function(e){(function(e){return"touches"in e})(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault()},Y=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=a.shouldPreventDefault,c=void 0===i||i,r=a.delay,l=void 0===r?300:r,s=Object(u.useState)(!1),o=Object(O.a)(s,2),d=o[0],j=o[1],h=Object(u.useRef)(),b=Object(u.useRef)(),m=Object(u.useCallback)((function(t){c&&t.target&&(t.target.addEventListener("touchend",Q,{passive:!1}),b.current=t.target),h.current=setTimeout((function(){e(t),j(!0)}),l)}),[e,l,c]),p=Object(u.useCallback)((function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];h.current&&clearTimeout(h.current),a&&!d&&t(),a&&d&&n(),j(!1),c&&b.current&&b.current.removeEventListener("touchend",Q)}),[c,t,n,d]);return{onMouseDown:function(e){return m(e)},onTouchStart:function(e){return m(e)},onMouseUp:function(e){return p(e)},onMouseLeave:function(e){return p(e,!1)},onTouchEnd:function(e){return p(e)}}},ee=function(e){var t=Object(u.useContext)(_e),n=t.deviceState,a=t.setDeviceState,i=Object(q.a)(J),c=Object(O.a)(i,1)[0],r=Object(q.a)(Z),l=Object(O.a)(r,1)[0],s=e.data,o=e.hover,d=Object(u.useState)(!1),j=Object(O.a)(d,2),h=j[0],b=j[1];Object(u.useEffect)((function(){var e={hovereId:n.hoveredId,data:n.data.map((function(e){return e._id===s._id?Object(m.a)(Object(m.a)({},e),{},{highlight:h}):e}))};a(e)}),[h]);var p=R.a.confirm,v=function(){console.log("release up"),c({variables:{id:s._id,status:"stop"}})},x={shouldPreventDefault:!0,delay:200},f=Y((function(){console.log("longpress up is triggered"),c({variables:{id:s._id,status:"up"}})}),(function(){console.log("click up is triggered")}),v,x),g=Y((function(){console.log("longpress down is triggered"),c({variables:{id:s._id,status:"down"}})}),(function(){console.log("click down is triggered")}),v,x);return Object(_.jsxs)(z.a,{children:[Object(_.jsx)(z.a.Toggle,{as:K.a,eventKey:s._id,className:"device-toogle",onPointerEnter:function(e){h||a(Object(m.a)(Object(m.a)({},n),{},{hoveredId:s._id}))},onPointerLeave:function(e){h||a(Object(m.a)(Object(m.a)({},n),{},{hoveredId:""}))},onClick:function(){b(!h)},id:s._id,children:Object(_.jsx)(K.a,{className:"device-item justify-content-flex-start",id:s._id,style:{backgroundColor:o?"#979ea3":""},children:Object(_.jsxs)(K.a.Text,{as:"div",className:"d-flex p-2 justify-content-space-between align-items-center",id:s._id,children:[Object(_.jsx)("i",{className:"bi-wifi px-3 align-self-center d-flex",style:{fontSize:"2.8rem"}}),Object(_.jsxs)("div",{className:"my-2",children:[Object(_.jsx)("h1",{style:{fontSize:"2.2rem"},className:"mx-3",children:s.name}),s.lat&&s.long&&Object(_.jsxs)("h4",{style:{fontSize:"1.1rem"},children:["V\u1ecb tr\xed: ",s.lat[s.lat.length-1],", ",s.long[s.long.length-1]]}),s.locationUpdateTime&&Object(_.jsxs)("i",{style:{fontSize:"0.8rem",paddingTop:"4px"},children:["C\u1eadp nh\u1eadt v\u1ecb tr\xed l\u1ea7n cu\u1ed1i: ",new Date(s.locationUpdateTime[s.locationUpdateTime.length-1]).toLocaleString()]})]}),Object(_.jsxs)("div",{className:"d-flex flex-column justify-content-center ml-auto mx-2",children:[Object(_.jsx)(G.a,Object(m.a)(Object(m.a)({},f),{},{icon:Object(_.jsx)(M.a,{}),size:"large"})),Object(_.jsx)(G.a,Object(m.a)(Object(m.a)({},g),{},{icon:Object(_.jsx)(W.a,{}),size:"large"}))]}),Object(_.jsx)(G.a,{style:{marginBottom:"16px"},type:"primary",danger:!0,disabled:s.alert,onClick:function(){p({title:"X\xe1c nh\u1eadn b\xe1o \u0111\u1ed9ng thi\u1ebft b\u1ecb",content:"B\xe1o \u0111\u1ed9ng thi\u1ebft b\u1ecb ".concat(s.name),onOk:function(){l({variables:{id:s._id}})},onCancel:function(){}})},children:"Alert"}),h&&Object(_.jsx)("i",{className:"fa fa-sort-desc ml-auto mx-2 align-self-start pin"}),!h&&Object(_.jsx)("i",{className:"fa fa-sort-up ml-auto mx-2 align-self-start pin"})]})})}),Object(_.jsx)(z.a.Collapse,{className:"device-collapse",eventKey:s._id,children:Object(_.jsx)(K.a,{className:"device-collapse-content",children:Object(_.jsxs)(K.a.Body,{className:"d-flex flex-row px-1",children:[Object(_.jsxs)("ul",{children:[Object(_.jsxs)("li",{children:["Nhi\u1ec7t \u0111\u1ed9: ",s.temperature.data[s.temperature.data.length-1]," \xb0C"]}),Object(_.jsxs)("i",{children:["(C\u1eadp nh\u1eadt l\u1ea7n cu\u1ed1i: ",new Date(s.temperature.updateTime[s.temperature.updateTime.length-1]).toLocaleString(),")"]}),Object(_.jsxs)("li",{children:["\u0110\u1ed9 \u1ea9m: ",s.humidity.data[s.humidity.data.length-1]," %"]}),Object(_.jsxs)("i",{children:["(C\u1eadp nh\u1eadt l\u1ea7n cu\u1ed1i: ",new Date(s.humidity.updateTime[s.humidity.updateTime.length-1]).toLocaleString(),")"]}),Object(_.jsxs)("li",{children:["M\u01b0a: ",s.rain.data[s.rain.data.length-1]?"C\xf3":"Kh\xf4ng"]}),Object(_.jsxs)("i",{children:["(C\u1eadp nh\u1eadt l\u1ea7n cu\u1ed1i: ",new Date(s.rain.updateTime[s.rain.updateTime.length-1]).toLocaleString(),")"]})]}),Object(_.jsxs)("ul",{className:"pr-4",children:[Object(_.jsxs)("li",{children:["\u0110\u1ed9 b\u1ee5i: ",s.dust.data[s.dust.data.length-1]," mg/m3"]}),Object(_.jsxs)("i",{children:["(C\u1eadp nh\u1eadt l\u1ea7n cu\u1ed1i: ",new Date(s.dust.updateTime[s.dust.updateTime.length-1]).toLocaleString(),")"]}),Object(_.jsxs)("li",{children:["N\u1ed3ng \u0111\u1ed9 CO: ",s.coGas.data[s.coGas.data.length-1]," ppm"]}),Object(_.jsxs)("i",{children:["(C\u1eadp nh\u1eadt l\u1ea7n cu\u1ed1i: ",new Date(s.coGas.updateTime[s.coGas.updateTime.length-1]).toLocaleString(),")"]}),Object(_.jsxs)("li",{children:["\u0110\u1ed9 \u1ea9m \u0111\u1ea5t: ",s.soilHumid.data[s.soilHumid.data.length-1]," %"]}),Object(_.jsxs)("i",{children:["(C\u1eadp nh\u1eadt l\u1ea7n cu\u1ed1i: ",new Date(s.soilHumid.updateTime[s.soilHumid.updateTime.length-1]).toLocaleString(),")"]})]})]})})})]})},te=function(){var e=Object(u.useContext)(_e).deviceState,t=Object(u.useState)({data:[],hoveredId:""}),n=Object(O.a)(t,2),a=n[0],i=n[1];return Object(u.useEffect)((function(){i(e)}),[e]),Object(_.jsxs)("div",{className:"device-list",children:[Object(_.jsx)(E.a,{className:"pt-2 m-1",children:Object(_.jsx)(U.a,{type:"input",placeholder:"Filter",className:"mr-5"})}),a.data&&a.data.map((function(t){return Object(_.jsx)(ee,{data:t,hover:t._id===e.hoveredId},t._id)}))]})},ne=(n(434),n(294)),ae=(n(435),n(611)),ie=n(621),ce=function(e){var t=Object(u.useContext)(_e),n=t.deviceState,a=t.setDeviceState,i=Object(u.useState)(!1),c=Object(O.a)(i,2),r=c[0],l=c[1],s=e.hover,o=e.$hover,d=e.highlight,j=e.data,h=Object(u.useState)(!1),b=Object(O.a)(h,2),p=b[0],v=b[1],x=Object(u.useRef)(null);return Object(u.useEffect)((function(){l(o),a(Object(m.a)(Object(m.a)({},n),{},{hoveredId:o?j._id:""}))}),[o]),Object(u.useEffect)((function(){l(s)}),[s,d]),Object(u.useEffect)((function(){d&&l(d)}),[d]),Object(_.jsxs)("div",{children:[Object(_.jsx)("i",{className:"fa fa-map-marker marker-".concat(j.alert?"blink":"none"),style:{fontSize:"2.5em",transform:r||p?"scale(1.5,1.5) translate(0,-7px)":"none"},ref:x,onClick:function(e){v(!p)}}),Object(_.jsx)(ae.a,{show:p||r,target:x.current,placement:"top",container:x.current,containerPadding:20,children:Object(_.jsxs)(ie.a,{id:"popover-device",children:[Object(_.jsx)(ie.a.Title,{style:{color:"black",fontWeight:"bold"},children:j.name}),Object(_.jsxs)(ie.a.Content,{children:[j.lat[j.lat.length-1],",",j.long.length-1]})]})})]})},re=function(e){return Object(_.jsx)("div",{className:"google-map",children:Object(_.jsx)(ne.a,{bootstrapURLKeys:{key:e.apiKey},defaultCenter:e.defaultCenter,defaultZoom:e.defaultZoom,hoverDistance:30,children:e.data.data&&e.data.data.map((function(t){return Object(_.jsx)(ce,{lat:t.lat[t.lat.length-1],lng:t.long[t.long.length-1],data:t,highlight:t.highlight,hover:e.data.hoveredId===t._id},t._id)}))})})},le=(n(437),function(e){var t,n,a=e.data,i=null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.length,c=null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.filter((function(e){return!0===(null===e||void 0===e?void 0:e.alert)})).length,r=i&&c?i-c:0;return Object(_.jsxs)("div",{className:"d-flex flex-row justify-content-center statistic-header",children:[Object(_.jsxs)(K.a,{className:"statistic-item px-2",id:"total-counter",children:[Object(_.jsx)(K.a.Title,{className:"statistic-title",children:"Total Devices"}),Object(_.jsx)(K.a.Text,{className:"statistic-counter",children:i})]}),Object(_.jsxs)(K.a,{className:"statistic-item px-2",id:"working-counter",children:[Object(_.jsx)(K.a.Title,{className:"statistic-title",children:"Working Devices"}),Object(_.jsx)(K.a.Text,{className:"statistic-counter",children:r})]}),Object(_.jsxs)(K.a,{className:"statistic-item px-2",id:"alert-counter",children:[Object(_.jsx)(K.a.Title,{className:"statistic-title",children:"Alert Devices"}),Object(_.jsx)(K.a.Text,{className:"statistic-counter",children:c})]})]})}),se=(n(438),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GRAPHQL_URI:"http://localhost:3001/graphql"}).REACT_APP_MAP_API_KEY),oe=function(){var e=Object(u.useContext)(_e).deviceState;return Object(_.jsxs)("div",{className:"main-contain d-flex justify-content-flex-start",children:[Object(_.jsxs)("div",{className:"flex-grow-1 pt-1 middle-content d-flex flex-column justify-content-flex-start",children:[Object(_.jsx)(le,{data:e}),Object(_.jsx)(re,{defaultCenter:{lat:21.04,lng:105.83},defaultZoom:15,apiKey:se,data:e})]}),Object(_.jsx)("div",{className:"flex-grow-1 right-content",children:Object(_.jsx)(te,{})})]})},de=(n(439),n(291)),ue=n.n(de),je=(n(443),n(190)),he=n.n(je),be=n(275),me={0:"0",100:{style:{color:"#f50"},label:Object(_.jsx)("strong",{children:"100"})},50:{style:{color:"#d4d106"},label:Object(_.jsx)("strong",{children:"50"})}},Oe={errorThreshold:"#ff0040",safeThreshold:"#00d9ff"},pe=[{label:"Nhi\u1ec7t \u0111\u1ed9 (\xb0C)",value:"temperature",marks:me,thresholdColor:Oe,graphType:"bar"},{label:"\u0110\u1ed9 \u1ea9m (%)",value:"humidity",marks:me,thresholdColor:Oe,graphType:"bar"},{label:"M\u01b0a",value:"rain",marks:me,thresholdColor:Oe,graphType:"line"},{label:"\u0110\u1ed9 b\u1ee5i (mg/m3)",value:"dust",marks:me,thresholdColor:Oe,graphType:"bar"},{label:"N\u1ed3ng \u0111\u1ed9 CO (ppm)",value:"coGas",marks:me,thresholdColor:Oe,graphType:"bar"},{label:"\u0110\u1ed9 \u1ea9m \u0111\u1ea5t (%)",value:"soilHumid",marks:me,thresholdColor:Oe,graphType:"bar"}],ve=n(293),xe=function(e){var t=e.data,n=e.startDate,a=e.endDate,i=e.property,c=[],r=[],l=[];t&&n&&a&&t[i.value].updateTime.forEach((function(e,s){e<=new Date(a).toISOString()&&e>=new Date(n).toISOString()&&(r.push(new Date(e).toLocaleString()),c.push(t[i.value].data[s]),l.push(t[i.value].data[s]>t[i.value].threshold?i.thresholdColor.errorThreshold:i.thresholdColor.safeThreshold))}));var s={labels:r,datasets:[{label:i.label,backgroundColor:l,borderColor:"#535252",borderWidth:1,data:c}]};return Object(_.jsx)("div",{children:Object(_.jsx)(ve.a,{height:400,width:550,data:s,options:{plugins:{title:{display:!0,text:"Bi\u1ec3u \u0111\u1ed3 ".concat(i.label),font:{size:30},padding:20},legend:{display:!0,position:"bottom"}},scales:{y:{type:"linear",min:0}}},type:"bar"})})},fe=(n(549),n(287)),ge=n.n(fe),ye=(n(551),n(290)),Te=n.n(ye),Se=(n(553),n(197)),Ce=n.n(Se),Ne=(n(554),n(288)),Ee=n.n(Ne),Ue=function(e){var t=e.data,n=e.property,a=Object(q.a)(X),i=Object(O.a)(a,1)[0],c=Object(u.useState)(t[n.value].threshold),r=Object(O.a)(c,2),l=r[0],s=r[1],o=Object(u.useState)(!0),d=Object(O.a)(o,2),j=d[0],h=d[1];Object(u.useEffect)((function(){s(t[n.value].threshold)}),[n,t]),Object(u.useEffect)((function(){h(l===t[n.value].threshold)}),[l]);var b=function(e){s(e)},m=R.a.confirm;return Object(_.jsxs)("div",{className:"thresholdSlideItem",children:[Object(_.jsx)("h3",{className:"",children:"Thi\u1ebft l\u1eadp ng\u01b0\u1ee1ng cho ph\xe9p"}),Object(_.jsx)("h4",{className:"",children:n.label}),Object(_.jsxs)(ge.a,{children:[Object(_.jsx)(Ce.a,{span:8,children:Object(_.jsx)("div",{style:{display:"inline-block",height:"45vh",marginTop:"4vh"},children:Object(_.jsx)(Ee.a,{min:0,max:100,onChange:b,value:"number"===typeof l?l:0,marks:n.marks,defaultValue:t[n.value].threshold,included:!0,vertical:!0})})}),Object(_.jsxs)(Ce.a,{span:8,style:{margin:"0 16px"},children:[Object(_.jsx)(Te.a,{min:0,max:100,className:"my-5",value:l,onChange:b}),Object(_.jsx)(G.a,{style:{marginBottom:"16px"},type:"primary",onClick:function(){m({title:"X\xe1c nh\u1eadn \u0111i\u1ec1u ch\u1ec9nh ng\u01b0\u1ee1ng",content:"".concat(n.label," thay \u0111\u1ed5i ch\u1ec9 s\u1ed1 t\u1eeb ").concat(t[n.value].threshold," th\xe0nh ").concat(l),onOk:function(){h(!0),i({variables:{value:l,id:t._id,property:n.value}})},onCancel:function(){}})},disabled:j,children:"Confirm"}),Object(_.jsx)(G.a,{style:{marginBottom:"16px"},type:"primary",danger:!0,onClick:function(){h(!1),s(t[n.value].threshold)},children:"Reset"})]})]})]})},De=function(){var e=Object(u.useContext)(_e).deviceState.data,t=Object(u.useState)(0),n=Object(O.a)(t,2),a=n[0],i=n[1],c=Object(u.useState)(pe[0]),r=Object(O.a)(c,2),l=r[0],s=r[1],o=Object(u.useState)(null),d=Object(O.a)(o,2),j=d[0],h=d[1],b=Object(u.useState)(null),m=Object(O.a)(b,2),p=m[0],v=m[1];Object(u.useEffect)((function(){e&&e[0]&&!j&&!p&&(h(e[a][l.value].updateTime[0].toLocaleString()),v(e[a][l.value].updateTime[e[a][l.value].updateTime.length-1].toLocaleString()))}),[e]);return Object(_.jsxs)("div",{className:"d-flex flex-row justify-content-center",children:[Object(_.jsxs)("div",{className:"p-3 graphContainer",children:[Object(_.jsxs)(E.a,{className:"d-flex flex-row justify-content-center",children:[Object(_.jsxs)(be.a,{className:"px-5",children:[Object(_.jsx)(E.a.Label,{children:"Ch\u1ecdn thi\u1ebft b\u1ecb"}),Object(_.jsx)(E.a.Control,{as:"select",type:"name",placeholder:"Name",className:"",onChange:function(e){i(e.target.value)},children:e&&e.map((function(e,t){return Object(_.jsx)("option",{value:t,children:e.name},e._id)}))})]}),Object(_.jsxs)(be.a,{className:"px-5",children:[Object(_.jsx)(E.a.Label,{children:"Ch\u1ecdn th\xf4ng s\u1ed1"}),Object(_.jsx)(E.a.Control,{as:"select",type:"property",placeholder:"Property",className:"",onChange:function(e){s(pe[e.target.value])},children:pe.map((function(e,t){return Object(_.jsx)("option",{value:t,children:e.label},e.label)}))})]}),Object(_.jsxs)(be.a,{className:"px-5",children:[Object(_.jsx)(E.a.Label,{children:"Ch\u1ecdn kho\u1ea3ng th\u1eddi gian"}),Object(_.jsx)(E.a.Text,{children:Object(_.jsx)(ue.a.RangePicker,{showTime:!0,disabledDate:function(e){return e>he()().endOf("day")},onChange:function(e,t){},onOk:function(e){var t,n;h(null===(t=e[0])||void 0===t?void 0:t._d),v(null===(n=e[1])||void 0===n?void 0:n._d)}})})]})]}),e&&"rain"!==l.value&&Object(_.jsx)(xe,{data:e[a],startDate:j,endDate:p,property:l}),e&&"rain"===l.value&&Object(_.jsx)(xe,{data:e[a],startDate:j,endDate:p,property:l})]}),Object(_.jsx)("div",{className:"setThresholdContainer",children:e&&e[a]&&"rain"!==l.value&&Object(_.jsx)(Ue,{data:e[a],property:l})})]})},_e=Object(u.createContext)({deviceState:{data:[],hoveredId:""},setDeviceState:function(){}});var we=function(){var e=Object(p.a)(T,{pollInterval:1e4}).data,t=Object(u.useState)({data:[],hoveredId:""}),n=Object(O.a)(t,2),a=n[0],i=n[1];return Object(u.useEffect)((function(){var t=null===e||void 0===e?void 0:e.getBorderDevices.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{highlight:!1})}));i({data:t,hoveredId:""})}),[e]),Object(_.jsx)(_e.Provider,{value:{deviceState:a,setDeviceState:i},children:Object(_.jsx)("div",{className:"App",children:Object(_.jsx)("div",{className:"vh-100 mvw-100 m-0 flex-column flex no-wrap",children:Object(_.jsx)("main",{className:"flex-grow",children:Object(_.jsxs)(v.a,{children:[Object(_.jsx)(w,{}),Object(_.jsxs)(x.c,{children:[Object(_.jsx)(x.a,{path:"/devices",children:Object(_.jsx)(H,{})}),Object(_.jsx)(x.a,{path:"/statistics",children:Object(_.jsx)(De,{})}),Object(_.jsx)(x.a,{path:"/",children:Object(_.jsx)(oe,{})})]})]})})})})})},ke=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,626)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))},Fe=n(612),Ie=n(616),Be=n(610),Le=new Fe.a({uri:"http://localhost:3001/graphql",cache:new Ie.a});b.a.render(Object(_.jsx)(Be.a,{client:Le,children:Object(_.jsx)(j.a.StrictMode,{children:Object(_.jsx)(we,{})})}),document.getElementById("root")),ke()}},[[588,1,2]]]);
//# sourceMappingURL=main.02c224c4.chunk.js.map