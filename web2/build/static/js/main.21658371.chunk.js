(this.webpackJsonpweb2=this.webpackJsonpweb2||[]).push([[0],{256:function(e,n,t){},257:function(e,n,t){},258:function(e,n,t){},356:function(e,n,t){},477:function(e,n,t){"use strict";t.r(n);var a,c,i,r,l,o,s,d,u,j,h,b=t(0),m=t.n(b),p=t(23),O=t.n(p),f=(t(256),t(26)),v=(t(257),t(72)),g=t(27),x=t(503),y=t(43),C=t(499),F=Object(C.a)(a||(a=Object(y.a)(["\n    fragment EnvironmentFeedingUnit on EnvironmentFeedingUnit {\n        data\n        threshold\n        updateTime\n    }\n"]))),S=Object(C.a)(c||(c=Object(y.a)(["\n    ","\n    query getFeedingDevices {\n        getFeedingDevices {\n            _id\n            name \n            temperature {\n                ...EnvironmentFeedingUnit\n            }\n            o2Gas {\n                ...EnvironmentFeedingUnit\n            }\n            pH {\n                ...EnvironmentFeedingUnit\n            }\n            footCan\n            footTray\n            fan\n        }\n    }\n"])),F),T=(Object(C.a)(i||(i=Object(y.a)(["\n    mutation CreateFeedingDevice($input: FeedingDeviceCreateInput) {\n        createFeedingDevice(input: $input) {\n            _id\n            name \n            temperature {\n                ...EnvironmentFeedingUnit\n            }\n            o2Gas {\n                ...EnvironmentFeedingUnit\n            }\n            pH {\n                ...EnvironmentFeedingUnit\n            }\n            footCan\n            footTray\n            fan\n        }\n    }\n"]))),Object(C.a)(r||(r=Object(y.a)(["\n    mutation UpdateFeedingDevice($input: FeedingDeviceUpdateInput) {\n        updateFeedingDevice(input: $input) {\n            _id\n            name \n            temperature {\n                ...EnvironmentFeedingUnit\n            }\n            o2Gas {\n                ...EnvironmentFeedingUnit\n            }\n            pH {\n                ...EnvironmentFeedingUnit\n            }\n            footCan\n            footTray\n            fan\n        }\n    }\n"]))),t(258),t(498)),E=t(490),N=t(500),U=t(501),k=t(238),D=t(491),$=t(5),w=function(){return Object($.jsx)("header",{className:"border-bottom",children:Object($.jsxs)(T.a,{bg:"light",expand:"lg",className:"p-0 px-2",variant:"light",children:[Object($.jsx)(T.a.Brand,{href:"/",className:"p-0",children:Object($.jsx)(E.a,{className:"header__logo"})}),Object($.jsx)(T.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object($.jsxs)(T.a.Collapse,{id:"basic-navbar-nav",children:[Object($.jsxs)(N.a,{className:"ml-auto d-flex align-items-center",children:[Object($.jsx)(v.b,{to:"/",className:"px-3",style:{fontSize:"1.2rem"},children:"Home"}),Object($.jsx)(v.b,{to:"/devices",className:"px-3",style:{fontSize:"1.2rem"},children:"Thi\u1ebft b\u1ecb"}),Object($.jsx)(v.b,{to:"/statistics",className:"px-3",style:{fontSize:"1.2rem"},children:"D\u1eef li\u1ec7u"}),Object($.jsx)(v.b,{to:"/about",className:"px-3 mr-3",style:{fontSize:"1.2rem"},children:"About"})]}),Object($.jsxs)(U.a,{inline:!0,className:"mr-5",children:[Object($.jsx)(k.a,{type:"search",placeholder:"Search",className:"mr-2","aria-label":"Search"}),Object($.jsx)(D.a,{variant:"outline-success",children:"Search"})]})]})]})})},_=t(53),L=(t(84),t(47)),H=t.n(L),G=(t(171),t(116)),V=t.n(G),z=(t(173),t(120)),I=t.n(z),P=(t(174),t(65)),B=t.n(P),R=(t(175),t(117)),q=t.n(R),K=(t(176),t(110)),M=t.n(K),A=t(504),J=function(e){var n=e.data,t=e.property,a=Object(b.useState)(n[t.value]),c=Object(f.a)(a,2),i=c[0],r=c[1],l=Object(b.useState)(!0),o=Object(f.a)(l,2),s=o[0],d=o[1],u=Object(A.a)(t.apiKey),j=Object(f.a)(u,2),h=j[0];j[1].data;Object(b.useEffect)((function(){r(n[t.value])}),[n]),Object(b.useEffect)((function(){d(i===n[t.value])}),[i]);var m=function(e){r(e)},p=M.a.confirm;return Object($.jsxs)("div",{className:"p-3 m-2",children:[Object($.jsx)("h4",{className:"d-flex justify-content-flex-start",children:t.label}),Object($.jsxs)(V.a,{children:[Object($.jsx)(B.a,{span:7,children:Object($.jsx)(q.a,{min:-100,max:100,onChange:m,value:"number"===typeof i?i:0,marks:t.marks,defaultValue:n[t.value],tipFormatter:function(e){return"".concat(e,"%")}})}),Object($.jsx)(B.a,{span:3,children:Object($.jsx)(I.a,{min:-100,max:100,style:{margin:"0 16px"},formatter:function(e){return"".concat(e)},value:i,onChange:m})}),Object($.jsx)(B.a,{span:1,children:Object($.jsx)(H.a,{type:"primary",onClick:function(){p({title:"X\xe1c nh\u1eadn \u0111i\u1ec1u ch\u1ec9nh th\xf4ng s\u1ed1",content:"".concat(t.label," thay \u0111\u1ed5i ch\u1ec9 s\u1ed1 t\u1eeb ").concat(n[t.value]," th\xe0nh ").concat(i),onOk:function(){d(!0),h({variables:{value:i,id:n._id}})},onCancel:function(){}})},disabled:s,children:"Confirm"})}),Object($.jsx)(B.a,{span:3,children:Object($.jsx)(H.a,{type:"primary",danger:!0,onClick:function(){d(!1),r(n[t.value])},children:"Reset"})})]})]})},X=function(e){var n=e.data,t=e.properties;return Object($.jsx)($.Fragment,{children:t.map((function(e){return Object($.jsx)(J,{data:n,property:e})}))})},W=Object(C.a)(l||(l=Object(y.a)(["\n    fragment EnvironmentFeedingUnit on EnvironmentFeedingUnit {\n        data\n        threshold\n        updateTime\n    }\n"]))),Q=Object(C.a)(o||(o=Object(y.a)(["\n    ","\n    mutation SetFootCan($value: Float!, $id: String!) {\n        setFootCan(value: $value, id: $id) {\n            _id\n            name \n            temperature {\n                ...EnvironmentFeedingUnit\n            }\n            o2Gas {\n                ...EnvironmentFeedingUnit\n            }\n            pH {\n                ...EnvironmentFeedingUnit\n            }\n            footCan\n            footTray\n            fan\n            cylinder\n        }\n    }\n"])),W),Y=Object(C.a)(s||(s=Object(y.a)(["\n    ","\n    mutation SetFootTray($value: Float!, $id: String!) {\n        setFootTray(value: $value, id: $id) {\n            _id\n            name \n            temperature {\n                ...EnvironmentFeedingUnit\n            }\n            o2Gas {\n                ...EnvironmentFeedingUnit\n            }\n            pH {\n                ...EnvironmentFeedingUnit\n            }\n            footCan\n            footTray\n            fan\n            cylinder\n        }\n    }\n"])),W),Z=Object(C.a)(d||(d=Object(y.a)(["\n    ","\n    mutation SetFan($value: Float!, $id: String!) {\n        setFan(value: $value, id: $id) {\n            _id\n            name \n            temperature {\n                ...EnvironmentFeedingUnit\n            }\n            o2Gas {\n                ...EnvironmentFeedingUnit\n            }\n            pH {\n                ...EnvironmentFeedingUnit\n            }\n            footCan\n            footTray\n            fan\n            cylinder\n        }\n    }\n"])),W),ee=Object(C.a)(u||(u=Object(y.a)(["\n    ","\n    mutation UpdateFeedingCylinderStatus($id: String!, $status: String!) {\n        updateFeedingCylinderStatus(id: $id, status: $status) {\n            _id\n            name \n            temperature {\n                ...EnvironmentFeedingUnit\n            }\n            o2Gas {\n                ...EnvironmentFeedingUnit\n            }\n            pH {\n                ...EnvironmentFeedingUnit\n            }\n            footCan\n            footTray\n            fan\n            cylinder\n        }\n    }\n"])),W),ne=t(506),te=t(507),ae=function(e){(function(e){return"touches"in e})(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault()},ce=function(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=a.shouldPreventDefault,i=void 0===c||c,r=a.delay,l=void 0===r?300:r,o=Object(b.useState)(!1),s=Object(f.a)(o,2),d=s[0],u=s[1],j=Object(b.useRef)(),h=Object(b.useRef)(),m=Object(b.useCallback)((function(n){i&&n.target&&(n.target.addEventListener("touchend",ae,{passive:!1}),h.current=n.target),j.current=setTimeout((function(){e(n),u(!0)}),l)}),[e,l,i]),p=Object(b.useCallback)((function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];j.current&&clearTimeout(j.current),a&&!d&&n(),a&&d&&t(),u(!1),i&&h.current&&h.current.removeEventListener("touchend",ae)}),[i,n,t,d]);return{onMouseDown:function(e){return m(e)},onTouchStart:function(e){return m(e)},onMouseUp:function(e){return p(e)},onMouseLeave:function(e){return p(e,!1)},onTouchEnd:function(e){return p(e)}}},ie={0:"0","-100":{style:{color:"#f50"},label:Object($.jsx)("strong",{children:"-100"})},100:{style:{color:"#f50"},label:Object($.jsx)("strong",{children:"100"})},"-75":{style:{color:"#d4d106"},label:Object($.jsx)("strong",{children:"-75"})},75:{style:{color:"#d4d106"},label:Object($.jsx)("strong",{children:"75"})},"-50":{style:{color:"#02ff63"},label:Object($.jsx)("strong",{children:"-50"})},50:{style:{color:"#02ff63"},label:Object($.jsx)("strong",{children:"50"})}},re=[{label:"\u0110\u1ed9ng c\u01a1 m\u1edf khoang th\u1ee9c \u0103n",value:"footCan",marks:ie,apiKey:Q},{label:"\u0110\u1ed9ng c\u01a1 quay khay th\u1ee9c \u0103n",value:"footTray",marks:ie,apiKey:Y},{label:"\u0110\u1ed9ng c\u01a1 c\xe1nh qu\u1ea1t ch\xe2n v\u1ecbt",value:"fan",marks:ie,apiKey:Z}],le=function(){var e=Object(b.useContext)(ye),n=e.deviceState,t=(e.setDeviceState,Object(A.a)(ee)),a=Object(f.a)(t,1)[0],c=n.data,i=Object(b.useState)(0),r=Object(f.a)(i,2),l=r[0],o=r[1],s=function(){console.log("release up"),a({variables:{id:c[l]._id,status:"stop"}})},d={shouldPreventDefault:!0,delay:200},u=ce((function(){console.log("longpress up is triggered"),a({variables:{id:c[l]._id,status:"up"}})}),(function(){console.log("click up is triggered")}),s,d),j=ce((function(){console.log("longpress down is triggered"),a({variables:{id:c[l]._id,status:"down"}})}),(function(){console.log("click down is triggered")}),s,d);return Object($.jsxs)("div",{className:"px-5 py-4",children:[Object($.jsx)("h1",{children:"\u0110i\u1ec1u ch\u1ec9nh th\xf4ng s\u1ed1 \u0111\u1ed9ng c\u01a1 thi\u1ebft b\u1ecb"}),Object($.jsx)(U.a,{className:"d-flex ",children:Object($.jsxs)(U.a.Group,{className:"py-2 px-4",children:[Object($.jsx)(U.a.Label,{style:{fontSize:"1.2rem"},children:"Ch\u1ecdn thi\u1ebft b\u1ecb"}),Object($.jsx)(U.a.Control,{as:"select",type:"name",placeholder:"Name",onChange:function(e){o(e.target.value)},children:c&&c.map((function(e,n){return Object($.jsx)("option",{value:n,children:e.name})}))})]})}),Object($.jsxs)("div",{className:"d-flex flex-row justify-content-flex-start px-4",children:[Object($.jsx)("h4",{className:"align-self-center",children:"\u0110i\u1ec1u ch\u1ec9nh khay th\u1ee9c \u0103n"}),Object($.jsxs)("div",{className:"d-flex flex-column justify-content-center mx-5",children:[Object($.jsx)(H.a,Object(_.a)(Object(_.a)({},u),{},{icon:Object($.jsx)(ne.a,{}),size:"large"})),Object($.jsx)(H.a,Object(_.a)(Object(_.a)({},j),{},{icon:Object($.jsx)(te.a,{}),size:"large"}))]})]}),c[0]&&Object($.jsx)(X,{data:c[l],properties:re})]})},oe=(t(352),t(246)),se=t.n(oe),de=(t(356),t(160)),ue=t.n(de),je=t(237),he={0:"0",100:{style:{color:"#f50"},label:Object($.jsx)("strong",{children:"100"})},50:{style:{color:"#d4d106"},label:Object($.jsx)("strong",{children:"50"})}},be={errorThreshold:"#ff0040",safeThreshold:"#00d9ff"},me=[{label:"N\u1ed3ng \u0111\u1ed9 O2 trong n\u01b0\u1edbc (mg/m3)",value:"o2Gas",marks:{0:"0",1e4:{style:{color:"#f50"},label:Object($.jsx)("strong",{children:"10000"})},5e3:{style:{color:"#d4d106"},label:Object($.jsx)("strong",{children:"5000"})}},maxValue:1e4,minValue:0,safeThresholeType:"higher",thresholdColor:be},{label:"\u0110\u1ed9 pH",value:"pH",marks:he,maxValue:100,minValue:0,safeThresholeType:"lower",thresholdColor:be},{label:"Nhi\u1ec7t \u0111\u1ed9 n\u01b0\u1edbc (\xb0C)",value:"temperature",marks:he,maxValue:100,minValue:0,safeThresholeType:"lower",thresholdColor:be}],pe=t(248),Oe=function(e){var n=e.data,t=e.startDate,a=e.endDate,c=e.property,i=[],r=[],l=[];n&&t&&a&&n[c.value].updateTime.forEach((function(e,o){e<=new Date(a).toISOString()&&e>=new Date(t).toISOString()&&(r.push(new Date(e).toLocaleString()),i.push(n[c.value].data[o]),"lower"===c.safeThresholeType&&l.push(n[c.value].data[o]<n[c.value].threshold?c.thresholdColor.safeThreshold:c.thresholdColor.errorThreshold),"higher"===c.safeThresholeType&&l.push(n[c.value].data[o]>n[c.value].threshold?c.thresholdColor.safeThreshold:c.thresholdColor.errorThreshold))}));var o={labels:r,datasets:[{label:c.label,backgroundColor:l,borderColor:"rgba(0,0,0,1)",borderWidth:1,data:i}]};return Object($.jsx)("div",{children:Object($.jsx)(pe.a,{style:{margin:"30px"},height:350,width:500,data:o,options:{plugins:{title:{display:!0,text:"Bi\u1ec3u \u0111\u1ed3 ".concat(c.label),font:{size:30},padding:20},legend:{display:!0,position:"bottom"}}},type:"bar"})})},fe=Object(C.a)(j||(j=Object(y.a)(["\n    fragment EnvironmentFeedingUnit on EnvironmentFeedingUnit {\n        data\n        threshold\n        updateTime\n    }\n"]))),ve=Object(C.a)(h||(h=Object(y.a)(["\n    ","\n    mutation SetFeedingThreshold($value: Float!, $property: String!, $id: String!) {\n        setFeedingThreshold(value: $value, property: $property, id: $id) {\n            _id\n            name \n            temperature {\n                ...EnvironmentFeedingUnit\n            }\n            o2Gas {\n                ...EnvironmentFeedingUnit\n            }\n            pH {\n                ...EnvironmentFeedingUnit\n            }\n            footCan\n            footTray\n            fan\n            cylinder\n        }\n    }\n"])),fe),ge=function(e){var n=e.data,t=e.property,a=Object(A.a)(ve),c=Object(f.a)(a,1)[0],i=Object(b.useState)(n[t.value].threshold),r=Object(f.a)(i,2),l=r[0],o=r[1],s=Object(b.useState)(!0),d=Object(f.a)(s,2),u=d[0],j=d[1];Object(b.useEffect)((function(){o(n[t.value].threshold)}),[t,n]),Object(b.useEffect)((function(){j(l===n[t.value].threshold)}),[l]);var h=function(e){o(e)},m=M.a.confirm;return Object($.jsxs)("div",{className:"thresholdSlideItem",children:[Object($.jsx)("h3",{className:"",children:"Thi\u1ebft l\u1eadp ng\u01b0\u1ee1ng cho ph\xe9p"}),Object($.jsx)("h4",{className:"",children:t.label}),Object($.jsxs)(V.a,{children:[Object($.jsx)(B.a,{span:8,children:Object($.jsx)("div",{style:{display:"inline-block",height:"45vh",marginTop:"4vh"},children:Object($.jsx)(q.a,{min:t.minValue,max:t.maxValue,onChange:h,value:"number"===typeof l?l:0,marks:t.marks,defaultValue:n[t.value].threshold,included:!0,vertical:!0})})}),Object($.jsxs)(B.a,{span:8,style:{margin:"0 16px"},children:[Object($.jsx)(I.a,{min:0,max:100,className:"my-5",value:l,onChange:h}),Object($.jsx)(H.a,{style:{marginBottom:"16px"},type:"primary",onClick:function(){m({title:"X\xe1c nh\u1eadn \u0111i\u1ec1u ch\u1ec9nh ng\u01b0\u1ee1ng",content:"".concat(t.label," thay \u0111\u1ed5i ch\u1ec9 s\u1ed1 t\u1eeb ").concat(n[t.value].threshold," th\xe0nh ").concat(l),onOk:function(){j(!0),c({variables:{value:l,id:n._id,property:t.value}})},onCancel:function(){}})},disabled:u,children:"Confirm"}),Object($.jsx)(H.a,{style:{marginBottom:"16px"},type:"primary",danger:!0,onClick:function(){j(!1),o(n[t.value].threshold)},children:"Reset"})]})]})]})},xe=function(){var e=Object(b.useContext)(ye).deviceState.data,n=Object(b.useState)(0),t=Object(f.a)(n,2),a=t[0],c=t[1],i=Object(b.useState)(me[0]),r=Object(f.a)(i,2),l=r[0],o=r[1],s=Object(b.useState)(null),d=Object(f.a)(s,2),u=d[0],j=d[1],h=Object(b.useState)(null),m=Object(f.a)(h,2),p=m[0],O=m[1];Object(b.useEffect)((function(){e&&e[0]&&!u&&!p&&(j(e[a][l.value].updateTime[0].toLocaleString()),O(e[a][l.value].updateTime[e[a][l.value].updateTime.length-1].toLocaleString()))}),[e]);return Object($.jsxs)("div",{className:"d-flex flex-row justify-content-center",children:[Object($.jsxs)("div",{className:"p-3 graphContainer",children:[Object($.jsxs)(U.a,{className:"d-flex flex-row justify-content-center",children:[Object($.jsxs)(je.a,{className:"px-5",children:[Object($.jsx)(U.a.Label,{children:"Ch\u1ecdn thi\u1ebft b\u1ecb"}),Object($.jsx)(U.a.Control,{as:"select",type:"name",placeholder:"Name",className:"",onChange:function(e){c(e.target.value)},children:e&&e.map((function(e,n){return Object($.jsx)("option",{value:n,children:e.name},e._id)}))})]}),Object($.jsxs)(je.a,{className:"px-5",children:[Object($.jsx)(U.a.Label,{children:"Ch\u1ecdn th\xf4ng s\u1ed1"}),Object($.jsx)(U.a.Control,{as:"select",type:"property",placeholder:"Property",className:"",onChange:function(e){o(me[e.target.value])},children:me.map((function(e,n){return Object($.jsx)("option",{value:n,children:e.label},e.label)}))})]}),Object($.jsxs)(je.a,{className:"px-5",children:[Object($.jsx)(U.a.Label,{children:"Ch\u1ecdn kho\u1ea3ng th\u1eddi gian"}),Object($.jsx)(U.a.Text,{children:Object($.jsx)(se.a.RangePicker,{showTime:!0,disabledDate:function(e){return e>ue()().endOf("day")},onChange:function(e,n){},onOk:function(e){var n,t;j(null===(n=e[0])||void 0===n?void 0:n._d),O(null===(t=e[1])||void 0===t?void 0:t._d)}})})]})]}),e&&Object($.jsx)(Oe,{data:e[a],startDate:u,endDate:p,property:l})]}),Object($.jsx)("div",{className:"setThresholdContainer",children:e[a]&&Object($.jsx)(ge,{data:e[a],property:l})})]})},ye=Object(b.createContext)({deviceState:{data:[]},setDeviceState:function(){}});var Ce=function(){var e=Object(x.a)(S,{pollInterval:1e4}).data,n=Object(b.useState)({data:[]}),t=Object(f.a)(n,2),a=t[0],c=t[1];return Object(b.useEffect)((function(){e&&c({data:null===e||void 0===e?void 0:e.getFeedingDevices})}),[e]),Object($.jsx)(ye.Provider,{value:{deviceState:a,setDeviceState:c},children:Object($.jsx)("div",{className:"App",children:Object($.jsx)("div",{className:"vh-100 mvw-100 m-0 flex-column flex no-wrap",children:Object($.jsx)("main",{className:"flex-grow",children:Object($.jsxs)(v.a,{children:[Object($.jsx)(w,{}),Object($.jsxs)(g.c,{children:[Object($.jsx)(g.a,{path:"/devices",children:Object($.jsx)(xe,{})}),Object($.jsx)(g.a,{path:"/statistics",children:Object($.jsx)(xe,{})}),Object($.jsx)(g.a,{path:"/",children:Object($.jsx)(le,{})})]})]})})})})})},Fe=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,508)).then((function(n){var t=n.getCLS,a=n.getFID,c=n.getFCP,i=n.getLCP,r=n.getTTFB;t(e),a(e),c(e),i(e),r(e)}))},Se=t(497),Te=t(502),Ee=t(496),Ne=new Se.a({uri:"http://18.141.188.154:4000/graphql",cache:new Te.a});O.a.render(Object($.jsx)(Ee.a,{client:Ne,children:Object($.jsx)(m.a.StrictMode,{children:Object($.jsx)(Ce,{})})}),document.getElementById("root")),Fe()}},[[477,1,2]]]);
//# sourceMappingURL=main.21658371.chunk.js.map